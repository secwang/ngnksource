<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>l/fmt.k - ngnksource</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

  <h1>l/fmt.k - ngnksource</h1>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L27">cnv</a></li>
<li><a href="#L13">dflt</a></li>
<li><a href="#L37">e0</a></li>
<li><a href="#L47">f</a></li>
<li><a href="#L21">filln</a></li>
<li><a href="#L20">fills</a></li>
<li><a href="#L35">fmt</a></li>
<li><a href="#L29">fmti</a></li>
<li><a href="#L34">fmts</a></li>
<li><a href="#L24">grp</a></li>
<li><a href="#L23">grp0</a></li>
<li><a href="#L8">init</a></li>
<li><a href="#L6">lex</a></li>
<li><a href="#L40">lvl</a></li>
<li><a href="#L41">m</a></li>
<li><a href="#L10">prs</a></li>
<li><a href="#L9">prs0</a></li>
<li><a href="#L39">r</a></li>
<li><a href="#L42">rl</a></li>
<li><a href="#L22">sign</a></li>
<li><a href="#L43">sp</a></li>
<li><a href="#L44">spl</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li>\<a href="../w/x/tetris.k.html#L13" title="w/x/tetris.k:13">d</a> <a href="../repl.k.html#L8" title="repl.k:8">fmt</a><br/></li>
<li>cls:@[&amp;<span class="Constant">256</span>;<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>;:;<span class="Constant">1</span>+!#<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>:(<span class="Constant">&quot;0&quot;</span>+!<span class="Constant">10</span>;<span class="Constant">&quot;.&quot;</span>;<span class="Constant">&quot;&lt;&gt;=^&quot;</span>;<span class="Constant">&quot;+- &quot;</span>;<span class="Constant">&quot;_,&quot;</span>;<span class="Constant">&quot;bcdeEfFgGnosxX%&quot;</span>)]<br/></li>
<li>CLS:`other`digit`dot`align`<a href="#L22" title="l/fmt.k:22">sign</a>`group`type@cls@<br/></li>
<li>spec:`chr`align`<a href="#L22" title="l/fmt.k:22">sign</a>`digit`group`dot`digit`type<br/></li>
<li>mtch:`fill`align`<a href="#L22" title="l/fmt.k:22">sign</a>`width`group`dot`prec`type<br/></li>
<li><a id="L6">&#x200c;</a><span class="linkable">lex</span>:{s:((p:<span class="Constant">1</span>~cls@*x)#,,<span class="Constant">&quot;&lt;&quot;</span>),(&amp;~=':<span class="Constant">1</span>=cls@x)_x;p_'|,/'((#s)#'0N <span class="Constant">2</span>#((),/:;,:;CLS;{`digit}))@'\:s}<br/></li>
<li><br/></li>
<li><a id="L8">&#x200c;</a><span class="linkable">init</span>:{$[`align~x[<span class="Constant">0</span>;<span class="Constant">1</span>];((<span class="Constant">0</span> <span class="Constant">1</span>;<span class="Constant">2</span>#*|x);<span class="Constant">2_</span>'x);((();<span class="Constant">&quot;&quot;</span>);x)]}<br/></li>
<li><a id="L9">&#x200c;</a><span class="linkable">prs0</span>:{{(a;cs):x;$[(spec@y)~cs[<span class="Constant">0</span>;<span class="Constant">0</span>];(a,'(y;-<span class="Constant">1</span>#*'cs);<span class="Constant">1_</span>'cs);x]}/[<a href="../w/x/tetris.k.html#L10" title="w/x/tetris.k:10">i</a>;(#**<a href="../w/x/tetris.k.html#L10" title="w/x/tetris.k:10">i</a>:<a href="#L8" title="l/fmt.k:8">init</a>@x)_!#spec]}<br/></li>
<li><a id="L10">&#x200c;</a><span class="linkable">prs</span>:{$[#**|<a href="#L39" title="l/fmt.k:39">r</a>:<a href="#L9" title="l/fmt.k:9">prs0</a>@<a href="#L6" title="l/fmt.k:6">lex</a>@x;`err@<span class="Constant">&quot;<span class="linkable">prs</span>: &quot;</span>,`<a href="runparts.k.html#L3" title="l/runparts.k:3">k</a>@<a href="#L39" title="l/fmt.k:39">r</a>;&gt;/`dot`digit=spec@s@<span class="Constant">0</span> <span class="Constant">1</span>+(s:**<a href="#L39" title="l/fmt.k:39">r</a>)?`dot;`err@<span class="Constant">&quot;<span class="linkable">prs</span>&quot;</span>;(mtch@**<a href="#L39" title="l/fmt.k:39">r</a>)!*|*<a href="#L39" title="l/fmt.k:39">r</a>]}<br/></li>
<li><br/></li>
<li>DFLT:`fill`align`<a href="#L22" title="l/fmt.k:22">sign</a>`width`type!(<span class="Constant">&quot; &lt;-0s&quot;</span>)<br/></li>
<li><a id="L13">&#x200c;</a><span class="linkable">dflt</span>:{x[`aligndef]:^(!x)?`align<br/></li>
<li>&nbsp; x[<a href="#L47" title="l/fmt.k:47">f</a>@<a href="../w/x/tetris.k.html#L25" title="w/x/tetris.k:25">w</a>]:(.DFLT)@<a href="../w/x/tetris.k.html#L25" title="w/x/tetris.k:25">w</a>:&amp;^(!x)?<a href="#L47" title="l/fmt.k:47">f</a>:!DFLT<br/></li>
<li>&nbsp; x[<a href="#L47" title="l/fmt.k:47">f</a>]:*'x[<span class="Statement"><a href="#L47" title="l/fmt.k:47">f</a>:</span>`fill`align`<a href="#L22" title="l/fmt.k:22">sign</a>`group`dot`type`prec]<br/></li>
<li>&nbsp; x[<a href="#L47" title="l/fmt.k:47">f</a>]:.'x[<span class="Statement"><a href="#L47" title="l/fmt.k:47">f</a>:</span>`prec];<br/></li>
<li>&nbsp; x}<br/></li>
<li><br/></li>
<li>D:`<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>$<span class="Constant">&quot;0&quot;</span>+!<span class="Constant">10<br/></li>
<li><a id="L20">&#x200c;</a></span><span class="linkable">fills</span>:{(<a href="#L47" title="l/fmt.k:47">f</a>;a;l):x;@[(l|#y)#<a href="#L47" title="l/fmt.k:47">f</a>;(!#y)+-<span class="Constant">2</span>!<span class="Constant">0</span>|(l-#y)*<span class="Constant">&quot;&lt;^&gt;&quot;</span>?a;:;y]}<br/></li>
<li><a id="L21">&#x200c;</a><span class="linkable">filln</span>:{(<a href="#L47" title="l/fmt.k:47">f</a>;l):x;(<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>#y),<a href="#L20" title="l/fmt.k:20">fills</a>[(<a href="#L47" title="l/fmt.k:47">f</a>;<span class="Constant">&quot;&gt;&quot;</span>;l-<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>)](<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>:^D?*y)_y}<br/></li>
<li><a id="L22">&#x200c;</a><span class="linkable">sign</span>:{<a href="#L39" title="l/fmt.k:39">r</a>:z;s:0N <span class="Constant">2</span>#<span class="Constant">&quot;+- -&quot;</span>;$[~x~<span class="Constant">&quot;-&quot;</span>;s[^x;y],<a href="#L39" title="l/fmt.k:39">r</a>;((<span class="Constant">&quot;&quot;</span>;<span class="Constant">&quot;-&quot;</span>)y),<a href="#L39" title="l/fmt.k:39">r</a>]}<br/></li>
<li><a id="L23">&#x200c;</a><span class="linkable">grp0</span>:{<a href="#L39" title="l/fmt.k:39">r</a>:z,(<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>:(-y)!#<span class="Constant">1_z</span>)#x;<a href="#L39" title="l/fmt.k:39">r</a>@&lt;&lt;@[&amp;#<a href="#L39" title="l/fmt.k:39">r</a>;(#<a href="#L39" title="l/fmt.k:39">r</a>)-(y+<span class="Constant">1</span>)*<span class="Constant">1</span>+!<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>;:;<span class="Constant">1</span>]}<br/></li>
<li><a id="L24">&#x200c;</a><span class="linkable">grp</span>:{(<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>#z),<a href="#L23" title="l/fmt.k:23">grp0</a>[x;y]@(<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>:^D?*z)_z}<br/></li>
<li><br/></li>
<li>A:`<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>$,/(<span class="Constant">&quot;0&quot;</span>+!<span class="Constant">10</span>;<span class="Constant">&quot;A&quot;</span>+!<span class="Constant">6</span>)<br/></li>
<li><a id="L27">&#x200c;</a><span class="linkable">cnv</span>:{_A@(<span class="Constant">2</span> <span class="Constant">8</span> <span class="Constant">10</span> <span class="Constant">16</span>@<span class="Constant">2</span>^<span class="Constant">&quot;bodx&quot;</span>?x)\y}<br/></li>
<li><br/></li>
<li><a id="L29">&#x200c;</a><span class="linkable">fmti</span>:{<a href="#L39" title="l/fmt.k:39">r</a>:<a href="#L22" title="l/fmt.k:22">sign</a>[x`<a href="#L22" title="l/fmt.k:22">sign</a>;y&lt;<span class="Constant">0</span>;<a href="#L27" title="l/fmt.k:27">cnv</a>[x`type]{x|-x}y]<br/></li>
<li>&nbsp; <a href="#L39" title="l/fmt.k:39">r</a>:$[^x`group;<a href="#L39" title="l/fmt.k:39">r</a>;<a href="#L24" title="l/fmt.k:24">grp</a>[x`group;<span class="Constant">4</span>-^<span class="Constant">&quot;box&quot;</span>?x`type;<a href="#L39" title="l/fmt.k:39">r</a>]]<br/></li>
<li>&nbsp; (<a href="#L47" title="l/fmt.k:47">f</a>;a):$[<span class="Constant">&quot;0&quot;</span>~*x`width;<span class="Constant">&quot;0=&quot;</span>;(x`fill),<span class="Constant">&quot;&gt;&quot;</span>]<br/></li>
<li>&nbsp; a:$[x`aligndef;a;x`align]<br/></li>
<li>&nbsp; $[<span class="Constant">&quot;=&quot;</span>~a;:<a href="#L21" title="l/fmt.k:21">filln</a>[<a href="#L47" title="l/fmt.k:47">f</a>,.x`width]<a href="#L39" title="l/fmt.k:39">r</a>;<a href="#L20" title="l/fmt.k:20">fills</a>[(<a href="#L47" title="l/fmt.k:47">f</a>,a),.x`width]<a href="#L39" title="l/fmt.k:39">r</a>]}<br/></li>
<li><a id="L34">&#x200c;</a><span class="linkable">fmts</span>:{<a href="#L20" title="l/fmt.k:20">fills</a>[(x`fill`align),.x`width;y]}<br/></li>
<li><a id="L35">&#x200c;</a><span class="linkable">fmt</span>:{<a href="#L47" title="l/fmt.k:47">f</a>:$[`<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>~_t:@y;<a href="#L34" title="l/fmt.k:34">fmts</a>;`<a href="../w/x/tetris.k.html#L10" title="w/x/tetris.k:10">i</a>~<a href="../dy/a.k.html#L110" title="dy/a.k:110">t</a>;<a href="#L29" title="l/fmt.k:29">fmti</a>;:`err@<span class="Constant">&quot;nyi&quot;</span>];<a href="#L47" title="l/fmt.k:47">f</a>[<a href="#L13" title="l/fmt.k:13">dflt</a>@<a href="#L10" title="l/fmt.k:10">prs</a>@x;y]}<br/></li>
<li><br/></li>
<li><a id="L37">&#x200c;</a><span class="linkable">e0</span>:{$[`<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>~@*x;x;`<a href="runparts.k.html#L3" title="l/runparts.k:3">k</a> x]}:<br/></li>
<li>/e1:<a href="#L37" title="l/fmt.k:37">e0</a>@.;<br/></li>
<li><a id="L39">&#x200c;</a><span class="linkable">r</span>:{&lt;\~^<span class="Constant">&quot;{}&quot;</span>?x}_<br/></li>
<li><a id="L40">&#x200c;</a><span class="linkable">lvl</span>:{s:+\(<span class="Constant">0</span> -<span class="Constant">1</span> <span class="Constant">1</span> <span class="Constant">0</span>@&amp;#'b)@g:&lt;,/b:<span class="Constant">4</span>#x;s@&amp;(#s)#<span class="Constant">1</span> <span class="Constant">0</span>}<br/></li>
<li><a id="L41">&#x200c;</a><span class="linkable">m</span>:{$[*|<a href="#L39" title="l/fmt.k:39">r</a>:<a href="#L40" title="l/fmt.k:40">lvl</a>@b:&amp;'<span class="Constant">&quot;{}&quot;</span>=\:x;`err@<span class="Constant">&quot;mismatched&quot;</span>;];!/+(@/<span class="Constant">1</span>&lt;<span class="Statement">:</span>\,/b<span class="Error">)</span>0N <span class="Constant">2</span>#,/.=<a href="#L39" title="l/fmt.k:39">r</a>}<br/></li>
<li><a id="L42">&#x200c;</a><span class="Statement"><span class="linkable">rl</span></span><span class="cUserCont">:</span>{op^:op@&amp;|':(~^?/<span class="Constant">1</span>(-<span class="Constant">1</span>+)\<a href="../w/x/tetris.k.html#L13" title="w/x/tetris.k:13">d</a>@op)&amp;(~^?/<span class="Constant">1</span>(<span class="Constant">1</span>+)\op:@/<span class="Constant">1</span>&lt;<span class="Statement">:</span>\!<a href="../w/x/tetris.k.html#L13" title="w/x/tetris.k:13">d</a>:<a href="#L41" title="l/fmt.k:41">m</a> x<span class="Error">)</span>;(op;<a href="../w/x/tetris.k.html#L13" title="w/x/tetris.k:13">d</a>@op)}<br/></li>
<li><a id="L43">&#x200c;</a><span class="Statement"><span class="linkable">sp</span></span><span class="cUserCont">:</span>{<span class="Constant">1_</span>'(,/<span class="Constant">0</span>,(@/<span class="Constant">1</span>&lt;<span class="Statement">:</span>\,/<a href="#L39" title="l/fmt.k:39">r</a><span class="Error">)</span>@&amp;~<a href="#L40" title="l/fmt.k:40">lvl</a>@<a href="#L39" title="l/fmt.k:39">r</a>:<a href="#L42" title="l/fmt.k:42">rl</a> x<span class="Error">)</span>_x}<br/></li>
<li><a id="L44">&#x200c;</a><span class="Statement"><span class="linkable">spl</span></span><span class="cUserCont">:</span>{$[|/^<a href="../w/x/tetris.k.html#L23" title="w/x/tetris.k:23">c</a>:<span class="Constant">0</span>,*|&amp;<span class="Constant">&quot;:&quot;</span>=x;:.x;];(v;<a href="#L47" title="l/fmt.k:47">f</a>):(-<span class="Constant">1</span> <span class="Constant">1</span>*~:\<span class="Constant">&quot;:&lt;&quot;</span>~(*|:;@[;<span class="Constant">1</span>])@'<a href="#L43" title="l/fmt.k:43">sp</a>)_'<a href="#L43" title="l/fmt.k:43">sp</a>:c_x;<a href="../repl.k.html#L8" title="repl.k:8">fmt</a>[<a href="#L47" title="l/fmt.k:47">f</a>;.v]}<br/></li>
<li><br/></li>
<li><span class="Statement"><a href="../w/fs.k.html#L3" title="w/fs.k:3">e</a></span><span class="cUserCont">:</span><a href="#L37" title="l/fmt.k:37">e0</a>@<a href="#L44" title="l/fmt.k:44">spl</a>@<br/></li>
<li><a id="L47">&#x200c;</a><span class="Statement"><span class="linkable">f</span></span><span class="cUserCont">:</span>{p:<a href="#L43" title="l/fmt.k:43">sp</a>@x; ,/((#p)#(<a href="#L39" title="l/fmt.k:39">r</a>;<a href="../w/fs.k.html#L3" title="w/fs.k:3">e</a>))@'p}@<span class="Constant">&quot; &quot;</span>,<br/></li>
<li>\<a href="../w/x/tetris.k.html#L13" title="w/x/tetris.k:13">d</a> .<br/></li>
<li><br/></li>
<li>/<br/></li>
<li><span class="Statement"><a href="#L47" title="l/fmt.k:47">f</a></span><span class="cUserCont">:</span><a href="../repl.k.html#L8" title="repl.k:8">fmt</a>.<a href="#L47" title="l/fmt.k:47">f</a><br/></li>
<li><span class="Statement"><a href="../repl.k.html#L8" title="repl.k:8">fmt</a></span><span class="cUserCont">:</span><a href="../repl.k.html#L8" title="repl.k:8">fmt</a>.<a href="../repl.k.html#L8" title="repl.k:8">fmt</a><br/></li>
<li><br/></li>
<li><a href="#L47" title="l/fmt.k:47">f</a><span class="Constant">&quot;{245+352346:~^25x}&quot;<br/></li>
<li></span><a href="../repl.k.html#L8" title="repl.k:8">fmt</a>[<span class="Constant">&quot;.&gt; 25,&quot;</span>;-<span class="Constant">234234</span>]<br/></li>
<li>\<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

 </body>
</html>
