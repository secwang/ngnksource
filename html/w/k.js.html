<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>w/k.js - ngnksource</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

  <h1>w/k.js - ngnksource</h1>

  <code><ol><li><span class="Constant">'use strict'</span> <span class="Comment">// ngn/<a href="../m.c.html#L59" title="m.c:59">k</a>, (<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>) 2019-2021 ngn, GNU AGPLv3 - https://codeberg.org/ngn/<a href="../m.c.html#L59" title="m.c:59">k</a>/raw/branch/master/LICENSE<br/></li>
<li></span><span class="Statement">const</span><span class="Identifier">{</span><a href="../a.h.html#L53" title="a.h:53">min</a>,<a href="../a.h.html#L54" title="a.h:54">max</a><span class="Identifier">}</span>=Math,<span class="Identifier">{</span>now<span class="Identifier">}</span>=<span class="Type">Date</span>,U8=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Statement">new</span> Uint8Array<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span>,doc=<span class="Statement">document</span>,<br/></li>
<li>T1=<span class="Statement">new</span> TextEncoder,t1=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;T1.encode<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span>,z1=pako.deflate,<br/></li>
<li>T0=<span class="Statement">new</span> TextDecoder,t0=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;T0.decode<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span>,z0=pako.inflate,<br/></li>
<li>c1=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{let</span> <a href="../0.c.html#L19" title="0.c:19">r</a>=<span class="Constant">''</span>;<span class="Statement">for</span><span class="javaScriptParens">(</span><span class="Identifier">let</span> <a href="../a.h.html#L15" title="a.h:15">i</a>=<span class="javaScriptValue">0</span>;<a href="../a.h.html#L15" title="a.h:15">i</a>&lt;<a href="../m.c.html#L70" title="m.c:70">x</a>.length;<a href="../a.h.html#L15" title="a.h:15">i</a>++<span class="javaScriptParens">)</span><a href="../0.c.html#L19" title="0.c:19">r</a>+=<span class="Type">String</span>.fromCharCode<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="Identifier">[</span><a href="../a.h.html#L15" title="a.h:15">i</a><span class="Identifier">]</span><span class="javaScriptParens">)</span>;<span class="Statement">return</span> <a href="../0.c.html#L19" title="0.c:19">r</a><span class="Identifier">}</span>,<br/></li>
<li>c0=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../0.c.html#L19" title="0.c:19">r</a>=U8<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>.length<span class="javaScriptParens">)</span>;<span class="Statement">for</span><span class="javaScriptParens">(</span><span class="Identifier">let</span> <a href="../a.h.html#L15" title="a.h:15">i</a>=<span class="javaScriptValue">0</span>;<a href="../a.h.html#L15" title="a.h:15">i</a>&lt;<a href="../m.c.html#L70" title="m.c:70">x</a>.length;<a href="../a.h.html#L15" title="a.h:15">i</a>++<span class="javaScriptParens">)</span><a href="../0.c.html#L19" title="0.c:19">r</a><span class="Identifier">[</span><a href="../a.h.html#L15" title="a.h:15">i</a><span class="Identifier">]</span>=<a href="../m.c.html#L70" title="m.c:70">x</a>.charCodeAt<span class="javaScriptParens">(</span><a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>;<span class="Statement">return</span> <a href="../0.c.html#L19" title="0.c:19">r</a><span class="Identifier">}</span>,<br/></li>
<li>p0=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span><span class="Statement">try</span><span class="Identifier">{</span><span class="Statement">return</span> <a href="../m.c.html#L70" title="m.c:70">x</a>?t0<span class="javaScriptParens">(</span>z0<span class="javaScriptParens">(</span>c0<span class="javaScriptParens">(</span>atob<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">))))</span>:<span class="Constant">''</span><span class="Identifier">}</span><span class="Statement">catch</span><span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span><span class="Identifier">{</span>console.error<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span>;<span class="Statement">return</span><span class="Constant">''</span><span class="Identifier">}}</span>,<br/></li>
<li>p1=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<a href="../m.c.html#L70" title="m.c:70">x</a>?btoa<span class="javaScriptParens">(</span>c1<span class="javaScriptParens">(</span>z1<span class="javaScriptParens">(</span>t1<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">))))</span>:<span class="Constant">''</span>,<br/></li>
<li>kc=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<a href="../m.c.html#L70" title="m.c:70">x</a>.which+<span class="javaScriptValue">1000</span>*<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>.ctrlKey+<span class="javaScriptValue">10</span>*<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>.shiftKey+<span class="javaScriptValue">10</span>*<a href="../m.c.html#L70" title="m.c:70">x</a>.altKey<span class="javaScriptParens">))</span>,<br/></li>
<li><a href="../a.h.html#L81" title="a.h:81">hsh</a>=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<a href="../m.c.html#L70" title="m.c:70">x</a>.split<span class="Constant">``</span>.reduce<span class="javaScriptParens">((</span><a href="../m.c.html#L70" title="m.c:70">x</a>,y<span class="javaScriptParens">)</span>=&gt;<span class="javaScriptValue">0</span>|<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>&lt;&lt;<span class="javaScriptValue">5</span><span class="javaScriptParens">)</span>-<a href="../m.c.html#L70" title="m.c:70">x</a>+y.charCodeAt<span class="javaScriptParens">(</span><span class="javaScriptValue">0</span><span class="javaScriptParens">)</span>,<span class="javaScriptValue">0</span><span class="javaScriptParens">)</span>,<br/></li>
<li>hx8=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="javaScriptParens">(</span><span class="Constant">'0000000'</span>+<a href="../m.c.html#L70" title="m.c:70">x</a>.toString<span class="javaScriptParens">(</span><span class="javaScriptValue">16</span><span class="javaScriptParens">))</span>.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">-8</span><span class="javaScriptParens">)</span>,<br/></li>
<li>rdy=<a href="../t/t.c.html#L33" title="t/t.c:33">f</a>=&gt;<span class="Identifier">[</span><span class="Constant">'complete'</span>,<span class="Constant">'interactive'</span><span class="Identifier">]</span>.indexOf<span class="javaScriptParens">(</span>doc.readyState<span class="javaScriptParens">)</span>&lt;<span class="javaScriptValue">0</span>?doc.addEventListener<span class="javaScriptParens">(</span><span class="Constant">'DOMContentLoaded'</span>,<a href="../t/t.c.html#L33" title="t/t.c:33">f</a><span class="javaScriptParens">)</span>:setTimeout<span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">f</a>,<span class="javaScriptValue">1</span><span class="javaScriptParens">)</span>,<br/></li>
<li>thr=<span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">f</a>,<a href="../e.c.html#L2" title="e.c:2">d</a><span class="javaScriptParens">)</span>=&gt;<span class="Identifier">{let</span> <a href="../a.h.html#L15" title="a.h:15">i</a>,<a href="../2.c.html#L56" title="2.c:56">l</a>=<span class="javaScriptValue">0</span>,g=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><a href="../a.h.html#L15" title="a.h:15">i</a>=<span class="javaScriptValue">0</span>;<a href="../2.c.html#L56" title="2.c:56">l</a>=now<span class="javaScriptParens">()</span>;<a href="../t/t.c.html#L33" title="t/t.c:33">f</a><span class="javaScriptParens">()</span><span class="Identifier">}</span>;<span class="Statement">return</span><span class="javaScriptParens">()</span>=&gt;<a href="../a.h.html#L15" title="a.h:15">i</a>=<a href="../a.h.html#L15" title="a.h:15">i</a>||setTimeout<span class="javaScriptParens">(</span>g,<a href="../a.h.html#L54" title="a.h:54">max</a><span class="javaScriptParens">(</span><span class="javaScriptValue">1</span>,<a href="../2.c.html#L56" title="2.c:56">l</a>+<a href="../e.c.html#L2" title="e.c:2">d</a>-now<span class="javaScriptParens">()))</span><span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">let</span> app,heap,inp=<span class="Constant">''<br/></li>
<li></span><span class="Statement">const</span> kw=fetch<span class="Constant">`<a href="../m.c.html#L59" title="m.c:59">k</a>.wasm`</span>.then<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<a href="../m.c.html#L70" title="m.c:70">x</a>.arrayBuffer<span class="javaScriptParens">())</span>,<br/></li>
<li>M=<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span>=&gt;U8<span class="javaScriptParens">(</span>app.memory.buffer<span class="javaScriptParens">)</span>.subarray<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../i.c.html#L17" title="i.c:17">p</a>+<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span>,<br/></li>
<li>g1=<a href="../i.c.html#L17" title="i.c:17">p</a>=&gt;<span class="Statement">new</span> DataView<span class="javaScriptParens">(</span>app.memory.buffer<span class="javaScriptParens">)</span>.getUint8<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a><span class="javaScriptParens">)</span>,<br/></li>
<li>gb=<a href="../i.c.html#L17" title="i.c:17">p</a>=&gt;<span class="Identifier">{let</span> <a href="../w.c.html#L17" title="w.c:17">q</a>=<a href="../i.c.html#L17" title="i.c:17">p</a>;<span class="Statement">while</span><span class="javaScriptParens">(</span>g1<span class="javaScriptParens">(</span><a href="../w.c.html#L17" title="w.c:17">q</a><span class="javaScriptParens">))</span><a href="../w.c.html#L17" title="w.c:17">q</a>++;<span class="Statement">return</span> M<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../w.c.html#L17" title="w.c:17">q</a>-<a href="../i.c.html#L17" title="i.c:17">p</a><span class="javaScriptParens">)</span><span class="Identifier">}</span>,<br/></li>
<li>gs=<a href="../i.c.html#L17" title="i.c:17">p</a>=&gt;t0<span class="javaScriptParens">(</span>gb<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a><span class="javaScriptParens">))</span>,<br/></li>
<li>s4=<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span>=&gt;<span class="Statement">new</span> DataView<span class="javaScriptParens">(</span>app.memory.buffer<span class="javaScriptParens">)</span>.setUint32<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../m.c.html#L70" title="m.c:70">x</a>,<span class="javaScriptValue">1</span><span class="javaScriptParens">)</span>,<br/></li>
<li><a href="../a.h.html#L62" title="a.h:62">S4</a>=<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../t/t.c.html#L27" title="t/t.c:27">a</a><span class="javaScriptParens">)</span>=&gt;<a href="../t/t.c.html#L27" title="t/t.c:27">a</a>.forEach<span class="javaScriptParens">((</span><a href="../m.c.html#L70" title="m.c:70">x</a>,<a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>=&gt;s4<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>+<span class="javaScriptValue">4</span>*<a href="../a.h.html#L15" title="a.h:15">i</a>,<a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">))</span>,<br/></li>
<li>ma=<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>=&gt;<span class="Identifier">{</span>heap+=<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>;<span class="Identifier">let</span> <a href="../t/t.c.html#L30" title="t/t.c:30">m</a>=app.memory,<a href="../2.c.html#L56" title="2.c:56">l</a>=<a href="../t/t.c.html#L30" title="t/t.c:30">m</a>.buffer.byteLength;heap&gt;<a href="../2.c.html#L56" title="2.c:56">l</a>&amp;&amp;<a href="../t/t.c.html#L30" title="t/t.c:30">m</a>.grow<span class="javaScriptParens">((</span>heap-<a href="../2.c.html#L56" title="2.c:56">l</a><span class="javaScriptValue">-1</span>&gt;&gt;&gt;<span class="javaScriptValue">16</span><span class="javaScriptParens">)</span>+<span class="javaScriptValue">1</span><span class="javaScriptParens">)</span>;<span class="Statement">return</span> heap-<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="Identifier">}</span>,<br/></li>
<li>msn=<a href="../j.c.html#L2" title="j.c:2">s</a>=&gt;<span class="Identifier">{</span><a href="../j.c.html#L2" title="j.c:2">s</a>=t1<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a><span class="javaScriptParens">)</span>;<span class="Identifier">let</span> <a href="../i.c.html#L17" title="i.c:17">p</a>=ma<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a>.length<span class="javaScriptParens">)</span>;M<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../j.c.html#L2" title="j.c:2">s</a>.length<span class="javaScriptParens">)</span>.set<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a><span class="javaScriptParens">)</span>;<span class="Statement">return</span><span class="Identifier">[</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../j.c.html#L2" title="j.c:2">s</a>.length<span class="Identifier">]}</span>,<br/></li>
<li>ms=<a href="../j.c.html#L2" title="j.c:2">s</a>=&gt;msn<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a><span class="javaScriptParens">)</span><span class="Identifier">[</span><span class="javaScriptValue">0</span><span class="Identifier">]</span>,<br/></li>
<li>wa=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;kw.then<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;WebAssembly.instantiate<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>,<span class="Identifier">{</span><a href="../m.c.html#L54" title="m.c:54">env</a><span class="Identifier">}</span><span class="javaScriptParens">))</span>,<br/></li>
<li><a href="../m.c.html#L54" title="m.c:54">env</a>=<span class="Identifier">{</span>sin:Math.sin,cos:Math.cos,log:Math.log,exp:Math.exp,<br/></li>
<li> js_in:<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=inp||<span class="Statement">prompt</span><span class="Constant">`stdin:</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`</span>;inp=<span class="Constant">''</span>;<span class="Statement">return</span> T1.encodeInto<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a>,M<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">))</span>.written<span class="Identifier">}</span>,<br/></li>
<li> js_out:<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span>=&gt;<span class="javaScriptParens">(</span><a href="http.c.html#L35" title="w/http.c:35">ap</a><span class="javaScriptParens">(</span>t0<span class="javaScriptParens">(</span>M<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)))</span>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span>,<br/></li>
<li> js_log:<a href="../t/t.c.html#L27" title="t/t.c:27">a</a>=&gt;console.log<span class="javaScriptParens">(</span>t0<span class="javaScriptParens">(</span>gb<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a><span class="javaScriptParens">)))</span>,<br/></li>
<li> js_time:<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../e.c.html#L2" title="e.c:2">b</a><span class="javaScriptParens">)</span>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../j.c.html#L23" title="j.c:23">t</a>=now<span class="javaScriptParens">()</span>;s4<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../j.c.html#L23" title="j.c:23">t</a>/<span class="javaScriptValue">1000</span><span class="javaScriptParens">)</span>;s4<span class="javaScriptParens">(</span><a href="../e.c.html#L2" title="e.c:2">b</a>,<a href="../j.c.html#L23" title="j.c:23">t</a>%<span class="javaScriptValue">1000</span>*<span class="javaScriptValue">1000</span><span class="javaScriptParens">)</span><span class="Identifier">}</span>,<br/></li>
<li> js_exit:<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span><span class="Statement">throw</span> Error<span class="javaScriptParens">(</span><span class="Constant">`exit(</span><span class="Special">${<a href="../m.c.html#L70" title="m.c:70">x</a>}</span><span class="Constant">)`</span><span class="javaScriptParens">)</span><span class="Identifier">}</span>,<br/></li>
<li> js_alloc:<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../i.c.html#L17" title="i.c:17">p</a>=<span class="javaScriptValue">4096</span>,<a href="../0.c.html#L19" title="0.c:19">r</a>=heap%<a href="../i.c.html#L17" title="i.c:17">p</a>;<a href="../0.c.html#L19" title="0.c:19">r</a>&amp;&amp;ma<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>-<a href="../0.c.html#L19" title="0.c:19">r</a><span class="javaScriptParens">)</span>;<span class="Statement">return</span> ma<span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span><span class="Identifier">}</span>,<br/></li>
<li> js_eval:<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../t/t.c.html#L30" title="t/t.c:30">m</a>,<a href="../0.c.html#L19" title="0.c:19">r</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">)</span>=&gt;T1.encodeInto<span class="javaScriptParens">(</span><span class="Constant">''</span>+eval<span class="javaScriptParens">(</span>t0<span class="javaScriptParens">(</span>M<span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<a href="../t/t.c.html#L30" title="t/t.c:30">m</a><span class="javaScriptParens">)))</span>,M<span class="javaScriptParens">(</span><a href="../0.c.html#L19" title="0.c:19">r</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="javaScriptParens">))</span>.written<span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">let</span> <a href="x/tetris.k.html#L25" title="w/x/tetris.k:25">w</a>=wa<span class="javaScriptParens">()</span>,<a href="../a.h.html#L79" title="a.h:79">out</a>=ou;<span class="Statement">const</span> cur=<span class="javaScriptParens">(</span>ta,<a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>=&gt;ta.setSelectionRange<span class="javaScriptParens">(</span><a href="../a.h.html#L15" title="a.h:15">i</a>,<a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>,<br/></li>
<li>cpy=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{let</span> <a href="../t/t.c.html#L28" title="t/t.c:28">c</a>=navigator.clipboard;<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>&amp;&amp;<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>.writeText<span class="javaScriptParens">(</span><a href="../a.h.html#L79" title="a.h:79">out</a>.value<span class="javaScriptParens">)</span><span class="Identifier">}</span>,<a href="http.c.html#L35" title="w/http.c:35">ap</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>=&gt;<span class="Identifier">{</span><a href="../a.h.html#L79" title="a.h:79">out</a>.value+=<a href="../j.c.html#L2" title="j.c:2">s</a>;cur<span class="javaScriptParens">(</span><a href="../a.h.html#L79" title="a.h:79">out</a>,<a href="../a.h.html#L79" title="a.h:79">out</a>.value.length<span class="javaScriptParens">)</span><span class="Identifier">}</span>,<br/></li>
<li><a href="../a.h.html#L79" title="a.h:79">kst</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>=&gt;<a href="../j.c.html#L2" title="j.c:2">s</a>.replace<span class="javaScriptParens">(</span>/<span class="Identifier">[\</span><span class="javaScriptValue">0</span><span class="Identifier">\</span><a href="../j.c.html#L23" title="j.c:23">t</a><span class="Identifier">\</span><a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="Identifier">\</span><a href="../0.c.html#L19" title="0.c:19">r</a><span class="Identifier">\</span><span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">]/g,<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>=&gt;'</span><span class="Special">\\</span><span class="Constant">'+'0tnr&quot;</span><span class="Identifier">\\</span><span class="Constant">'['</span><span class="Identifier">\</span><span class="javaScriptValue">0</span><span class="Identifier">\</span><a href="../j.c.html#L23" title="j.c:23">t</a><span class="Identifier">\</span><a href="../t/t.c.html#L33" title="t/t.c:33">n</a><span class="Identifier">\</span><a href="../0.c.html#L19" title="0.c:19">r</a><span class="Identifier">\</span><span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">'.indexOf(<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>)])<br/></li>
<li></span>rdy<span class="javaScriptParens">(</span><a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{<br/></li>
<li></span> <span class="Statement">if</span><span class="javaScriptParens">(</span><span class="Statement">location</span>.hash===<span class="Constant">'#<a href="../0.c.html#L19" title="0.c:19">r</a>'</span><span class="javaScriptParens">)</span><span class="Identifier">{</span> <span class="Comment">//<a href="../m.c.html#L58" title="m.c:58">repl</a> mode<br/></li>
<li></span>&nbsp; doc.body.classList.<a href="../a.h.html#L81" title="a.h:81">add</a><span class="Constant">`<a href="../m.c.html#L58" title="m.c:58">repl</a>`</span>;ed.value=<span class="Constant">''</span>;<a href="../a.h.html#L79" title="a.h:79">out</a>=ed;<span class="Identifier">let</span> ha=<span class="Identifier">[</span><span class="Constant">''</span><span class="Identifier">]</span>,<a href="../2.c.html#L27" title="2.c:27">hi</a>=<span class="javaScriptValue">0</span> <span class="Comment">//ha,<a href="../2.c.html#L27" title="2.c:27">hi</a>:history array and index<br/></li>
<li></span>&nbsp; <a href="x/tetris.k.html#L25" title="w/x/tetris.k:25">w</a>.then<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span>app=<a href="../m.c.html#L70" title="m.c:70">x</a>.instance.exports;heap=app.__heap_base<br/></li>
<li>&nbsp;&nbsp; <span class="Identifier">let</span> <a href="../i.c.html#L17" title="i.c:17">p</a>=ms<span class="javaScriptParens">(</span><span class="Constant">'kw</span><span class="Special">\0</span><span class="Constant"><a href="../m.c.html#L58" title="m.c:58">repl</a>.<a href="../m.c.html#L59" title="m.c:59">k</a></span><span class="Special">\0</span><span class="Constant">'</span><span class="javaScriptParens">)</span>,<a href="../m.c.html#L54" title="m.c:54">argv</a>=ma<span class="javaScriptParens">(</span><span class="javaScriptValue">16</span><span class="javaScriptParens">)</span>;<a href="../a.h.html#L62" title="a.h:62">S4</a><span class="javaScriptParens">(</span><a href="../m.c.html#L54" title="m.c:54">argv</a>,<span class="Identifier">[</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../i.c.html#L17" title="i.c:17">p</a>+<span class="javaScriptValue">3</span>,<span class="javaScriptValue">0</span>,<span class="javaScriptValue">0</span><span class="Identifier">]</span><span class="javaScriptParens">)</span>;app.<a href="../m.c.html#L61" title="m.c:61">kinit</a><span class="javaScriptParens">()</span>;app.<a href="../m.c.html#L68" title="m.c:68">kargs</a><span class="javaScriptParens">(</span><span class="javaScriptValue">1</span>,<a href="../m.c.html#L54" title="m.c:54">argv</a><span class="javaScriptParens">)</span>;inp=<span class="Constant">'</span><span class="Special">\\</span><span class="Constant"><a href="../2.c.html#L56" title="2.c:56">l</a> <a href="../m.c.html#L58" title="m.c:58">repl</a>.<a href="../m.c.html#L59" title="m.c:59">k</a></span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">'</span>;app.rep<span class="javaScriptParens">()</span><span class="Identifier">}</span><span class="javaScriptParens">)<br/></li>
<li></span>&nbsp; ed.onkeydown=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../m.c.html#L59" title="m.c:59">k</a>=kc<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span>,skp<span class="Comment">/*skip prompt*/</span>=<a href="../a.h.html#L15" title="a.h:15">i</a>=&gt;<a href="../a.h.html#L15" title="a.h:15">i</a>+<span class="javaScriptParens">(</span>ed.value<span class="Identifier">[</span><a href="../a.h.html#L15" title="a.h:15">i</a><span class="Identifier">]</span>===<span class="Constant">' '</span><span class="javaScriptParens">)<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../m.c.html#L59" title="m.c:59">k</a>===<span class="javaScriptValue">38</span>||<a href="../m.c.html#L59" title="m.c:59">k</a>===<span class="javaScriptValue">40</span><span class="javaScriptParens">)</span><span class="Identifier">{let</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=ed.value,<a href="../a.h.html#L15" title="a.h:15">i</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>.lastIndexOf<span class="Constant">`</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`</span>+<span class="javaScriptValue">1</span>;ha<span class="Identifier">[</span><a href="../2.c.html#L27" title="2.c:27">hi</a><span class="Identifier">]</span>=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>;<a href="../2.c.html#L27" title="2.c:27">hi</a>=<a href="../a.h.html#L54" title="a.h:54">max</a><span class="javaScriptParens">(</span><span class="javaScriptValue">0</span>,<a href="../a.h.html#L53" title="a.h:53">min</a><span class="javaScriptParens">(</span>ha.length<span class="javaScriptValue">-1</span>,<a href="../2.c.html#L27" title="2.c:27">hi</a>+<a href="../m.c.html#L59" title="m.c:59">k</a><span class="javaScriptValue">-39</span><span class="javaScriptParens">))<br/></li>
<li></span>&nbsp; &nbsp; ed.value=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">0</span>,<a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>+ha<span class="Identifier">[</span><a href="../2.c.html#L27" title="2.c:27">hi</a><span class="Identifier">]</span>;cur<span class="javaScriptParens">(</span>ed,skp<span class="javaScriptParens">(</span><a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">))</span>;<span class="Statement">return</span>!<span class="javaScriptValue">1</span><span class="Identifier">}<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../m.c.html#L59" title="m.c:59">k</a>===<span class="javaScriptValue">13</span><span class="javaScriptParens">)</span><span class="Identifier">{let</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=ed.value,<a href="../i.c.html#L17" title="i.c:17">p</a>=ed.selectionStart,<a href="../w.c.html#L17" title="w.c:17">q</a>=ed.selectionEnd<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>===<a href="../w.c.html#L17" title="w.c:17">q</a><span class="javaScriptParens">)</span><span class="Identifier">{</span><a href="../i.c.html#L17" title="i.c:17">p</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">0</span>,<a href="../i.c.html#L17" title="i.c:17">p</a><span class="javaScriptParens">)</span>.lastIndexOf<span class="Constant">`</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`</span>+<span class="javaScriptValue">1</span>;<a href="../w.c.html#L17" title="w.c:17">q</a>=<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a>+<span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span><span class="javaScriptParens">)</span>.indexOf<span class="javaScriptParens">(</span><span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span>,<a href="../w.c.html#L17" title="w.c:17">q</a><span class="javaScriptParens">)</span><span class="Identifier">}<br/></li>
<li></span>&nbsp; &nbsp; ha<span class="Identifier">[</span><a href="../2.c.html#L27" title="2.c:27">hi</a><span class="Identifier">]</span>=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a>,<a href="../w.c.html#L17" title="w.c:17">q</a><span class="javaScriptParens">)</span>;inp=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span>skp<span class="javaScriptParens">(</span><a href="../i.c.html#L17" title="i.c:17">p</a><span class="javaScriptParens">)</span>,<a href="../w.c.html#L17" title="w.c:17">q</a><span class="javaScriptParens">)</span>+<span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span>;<span class="Identifier">let</span> <a href="../2.c.html#L56" title="2.c:56">l</a>=ha.length<span class="javaScriptValue">-1</span>;<a href="../2.c.html#L27" title="2.c:27">hi</a>&lt;<a href="../2.c.html#L56" title="2.c:56">l</a>&amp;&amp;<span class="javaScriptParens">(</span>ha<span class="Identifier">[</span><a href="../2.c.html#L56" title="2.c:56">l</a><span class="Identifier">]</span>=ha<span class="Identifier">[</span><a href="../2.c.html#L27" title="2.c:27">hi</a><span class="Identifier">]</span><span class="javaScriptParens">)</span>;<a href="../2.c.html#L27" title="2.c:27">hi</a>=ha.push<span class="Constant">``</span><span class="javaScriptValue">-1<br/></li>
<li></span>&nbsp; &nbsp; <a href="http.c.html#L35" title="w/http.c:35">ap</a><span class="javaScriptParens">(</span><a href="../w.c.html#L17" title="w.c:17">q</a>-<a href="../j.c.html#L2" title="j.c:2">s</a>.length?inp+<span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span>:<span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span><span class="javaScriptParens">)</span>;inp=<span class="Constant">`<a href="../m.c.html#L58" title="m.c:58">repl</a>.line@</span><span class="Special">${inp.length-1?</span><span class="Constant">''</span><span class="Special">:</span><span class="Constant">','</span><span class="Special">}</span><span class="Constant">&quot;</span><span class="Special">${<a href="../a.h.html#L79" title="a.h:79">kst</a>(inp)}</span><span class="Constant">&quot;;</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">try</span><span class="Identifier">{</span>app.rep<span class="javaScriptParens">()</span><span class="Identifier">}</span><span class="Statement">catch</span><span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span><span class="Identifier">{</span>ed.disabled=<span class="javaScriptValue">1</span>;console.error<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span><span class="Identifier">}</span>;<span class="Statement">return</span>!<span class="javaScriptValue">1</span><span class="Identifier">}}}<br/></li>
<li></span> <span class="Statement">else</span><span class="Identifier">{</span> <span class="Comment">//editor mode<br/></li>
<li></span>&nbsp; <span class="Statement">const</span> ubc=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{let</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=ed.value,<a href="../a.h.html#L15" title="a.h:15">i</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>.indexOf<span class="Constant">`</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`</span>,<a href="../0.c.html#L19" title="0.c:19">r</a>=<span class="Identifier">[]</span> <span class="Comment">//update byte count and return the counted part<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../a.h.html#L15" title="a.h:15">i</a>&gt;=<span class="javaScriptValue">0</span><span class="javaScriptParens">)</span><span class="Identifier">{</span><a href="../j.c.html#L2" title="j.c:2">s</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">0</span>,<a href="../a.h.html#L15" title="a.h:15">i</a><span class="javaScriptParens">)</span>;<a href="../0.c.html#L19" title="0.c:19">r</a>.push<span class="Constant">`till empty line`</span><span class="Identifier">}<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">0</span>,<span class="javaScriptValue">2</span><span class="javaScriptParens">)</span>===<span class="Constant">'<a href="../t/t.c.html#L33" title="t/t.c:33">f</a>:'</span><span class="javaScriptParens">)</span><span class="Identifier">{</span><a href="../j.c.html#L2" title="j.c:2">s</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">2</span><span class="javaScriptParens">)</span>;<a href="../0.c.html#L19" title="0.c:19">r</a>.push<span class="Constant">`<a href="../a.h.html#L79" title="a.h:79">not</a> counting initial &quot;<a href="../t/t.c.html#L33" title="t/t.c:33">f</a>:&quot;`</span><span class="Identifier">}<br/></li>
<li></span>&nbsp;&nbsp; bc.textContent=<a href="../j.c.html#L2" title="j.c:2">s</a>.length+<span class="Constant">'bytes'</span>+<span class="javaScriptParens">(</span><a href="../0.c.html#L19" title="0.c:19">r</a>.length?<span class="Constant">`(</span><span class="Special">${<a href="../0.c.html#L19" title="0.c:19">r</a>.join</span><span class="Constant">`, `</span><span class="Special">}</span><span class="Constant">)`</span>:<span class="Constant">''</span><span class="javaScriptParens">)</span>;<span class="Statement">return</span> <a href="../j.c.html#L2" title="j.c:2">s</a><span class="Identifier">}<br/></li>
<li></span>&nbsp; <a href="../a.h.html#L79" title="a.h:79">out</a>.value=<span class="Constant">''</span>;ed.value=p0<span class="javaScriptParens">(</span><span class="Statement">location</span>.hash.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">1</span><span class="javaScriptParens">)</span>.replace<span class="javaScriptParens">(</span>/-$/,<span class="Constant">''</span><span class="javaScriptParens">))<br/></li>
<li></span>&nbsp; <span class="Statement">const</span> ev=<a href="../j.c.html#L2" title="j.c:2">s</a>=&gt;<a href="x/tetris.k.html#L25" title="w/x/tetris.k:25">w</a>.then<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span>app=<a href="../m.c.html#L70" title="m.c:70">x</a>.instance.exports;heap=app.__heap_base;txt<span class="javaScriptParens">()</span>;<a href="../a.h.html#L79" title="a.h:79">out</a>.value=<span class="Constant">''</span>;ubc<span class="javaScriptParens">()<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">const</span> O_RDWR=<span class="javaScriptValue">2</span>,O_CREAT=<span class="javaScriptValue">64</span><span class="Comment">/*512 on freebsd*/<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">const</span> <a href="../t/t.c.html#L33" title="t/t.c:33">f</a>=app.open<span class="javaScriptParens">(</span>ms<span class="javaScriptParens">(</span><span class="Constant">'<a href="../t/t.c.html#L27" title="t/t.c:27">a</a>.<a href="../m.c.html#L59" title="m.c:59">k</a></span><span class="Special">\0</span><span class="Constant">'</span><span class="javaScriptParens">)</span>,O_RDWR|O_CREAT,<span class="javaScriptValue">438</span><span class="Comment">/*0666*/</span><span class="javaScriptParens">)</span>,<span class="Identifier">[</span><a href="../w.c.html#L17" title="w.c:17">q</a>,nq<span class="Identifier">]</span>=msn<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a><span class="javaScriptParens">)</span>;app.write<span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">f</a>,<a href="../w.c.html#L17" title="w.c:17">q</a>,nq<span class="javaScriptParens">)</span>;app.close<span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">f</a><span class="javaScriptParens">)<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">const</span> <a href="../a.h.html#L163" title="a.h:163">h</a>=heap,<a href="../t/t.c.html#L27" title="t/t.c:27">a</a>=heap+=T1.encodeInto<span class="javaScriptParens">(</span><span class="Constant">'<a href="../m.c.html#L59" title="m.c:59">k</a></span><span class="Special">\0</span><span class="Constant"><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>.<a href="../m.c.html#L59" title="m.c:59">k</a></span><span class="Special">\0</span><span class="Constant">'</span>,M<span class="javaScriptParens">(</span>heap,<span class="javaScriptValue">8</span><span class="javaScriptParens">))</span>.written;<a href="../a.h.html#L62" title="a.h:62">S4</a><span class="javaScriptParens">(</span><a href="../t/t.c.html#L27" title="t/t.c:27">a</a>,<span class="Identifier">[</span><a href="../a.h.html#L163" title="a.h:163">h</a>,<a href="../a.h.html#L163" title="a.h:163">h</a>+<span class="javaScriptValue">2</span>,<span class="javaScriptValue">0</span>,<span class="javaScriptValue">0</span><span class="Identifier">]</span><span class="javaScriptParens">)</span>;heap+=<span class="javaScriptValue">16</span>;<br/></li>
<li>&nbsp;&nbsp; <span class="Identifier">let</span> <a href="../t/t.c.html#L33" title="t/t.c:33">e</a>;<span class="Statement">try</span><span class="Identifier">{</span>app.<a href="../x/embed/a.py.html#L39" title="x/embed/a.py:39">main</a><span class="javaScriptParens">(</span><span class="javaScriptValue">2</span>,<a href="../t/t.c.html#L27" title="t/t.c:27">a</a><span class="javaScriptParens">)</span><span class="Identifier">}</span><span class="Statement">catch</span><span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span><span class="Identifier">{</span><a href="../t/t.c.html#L33" title="t/t.c:33">e</a>=<a href="../m.c.html#L70" title="m.c:70">x</a><span class="Identifier">}</span><span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">e</a>&amp;&amp;<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.message!==<span class="Constant">'exit(0)'</span><span class="javaScriptParens">)</span><span class="Statement">throw</span> <a href="../t/t.c.html#L33" title="t/t.c:33">e</a>;<a href="x/tetris.k.html#L25" title="w/x/tetris.k:25">w</a>=wa<span class="javaScriptParens">()</span><span class="Identifier">}</span><span class="javaScriptParens">)<br/></li>
<li></span>&nbsp; <span class="Statement">const</span> evp=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> v=ed.value,<a href="../j.c.html#L2" title="j.c:2">s</a>=v.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">-1</span><span class="javaScriptParens">)</span>===<span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span>?v:v+<span class="Special">'\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>'</span>,<a href="../i.c.html#L17" title="i.c:17">p</a>=p1<span class="javaScriptParens">(</span>v<span class="javaScriptParens">)</span>;<span class="Statement">location</span>.hash=<a href="../i.c.html#L17" title="i.c:17">p</a>+<span class="Constant">'-'</span>;ev<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a><span class="javaScriptParens">)</span>.then<span class="javaScriptParens">(</span><a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Statement">location</span>.hash=<a href="../i.c.html#L17" title="i.c:17">p</a><span class="javaScriptParens">)</span><span class="Identifier">}<br/></li>
<li></span>&nbsp; bEval.onclick=evp;<span class="Statement">if</span><span class="javaScriptParens">(</span><span class="Statement">location</span>.hash.slice<span class="javaScriptParens">(</span><span class="javaScriptValue">-1</span><span class="javaScriptParens">)</span>!==<span class="Constant">'-'</span><span class="javaScriptParens">)</span>evp<span class="javaScriptParens">()<br/></li>
<li></span>&nbsp; bGolf.onclick=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=ed.value,<a href="../a.h.html#L163" title="a.h:163">h</a>=<span class="Constant">'ngn-'</span>+hx8<span class="javaScriptParens">(</span><a href="../a.h.html#L81" title="a.h:81">hsh</a><span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a><span class="javaScriptParens">))</span>,g=ubc<span class="javaScriptParens">()<br/></li>
<li></span>&nbsp;&nbsp; cpy<span class="javaScriptParens">(</span><a href="../a.h.html#L79" title="a.h:79">out</a>.value=<span class="Constant">`# [<a href="../k.h.html#L2" title="k.h:2">K</a> (ngn/<a href="../m.c.html#L59" title="m.c:59">k</a>)], </span><span class="Special">${g.length}</span><span class="Constant"> bytes</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">&nbsp; &nbsp; </span><span class="Special">${g.replace(/\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>/g,</span><span class="Constant">'</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">&nbsp; &nbsp; '</span><span class="Special">)}\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a>\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">[Try <a href="../j.c.html#L23" title="j.c:23">it</a> online!][</span><span class="Special">${<a href="../a.h.html#L163" title="a.h:163">h</a>}</span><span class="Constant">]</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`</span>+<br/></li>
<li>&nbsp; &nbsp; <span class="Constant">`</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">[<a href="../k.h.html#L2" title="k.h:2">K</a> (ngn/<a href="../m.c.html#L59" title="m.c:59">k</a>)]: https://codeberg.org/ngn/<a href="../m.c.html#L59" title="m.c:59">k</a></span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">[</span><span class="Special">${<a href="../a.h.html#L163" title="a.h:163">h</a>}</span><span class="Constant">]: </span><span class="Special">${location.origin}</span><span class="Constant">/<a href="../m.c.html#L59" title="m.c:59">k</a>#</span><span class="Special">${p1(<a href="../j.c.html#L2" title="j.c:2">s</a>)}\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">`</span><span class="javaScriptParens">)</span><span class="Identifier">}<br/></li>
<li></span>&nbsp; bLink.onclick=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=ed.value,g=ubc<span class="javaScriptParens">()</span>,<a href="../t/t.c.html#L26" title="t/t.c:26">u</a>=g.replace<span class="javaScriptParens">(</span>/<span class="Constant">`/g,'</span><span class="Special">\\</span><span class="Constant">`').replace(/</span><span class="Special">\\</span><span class="Constant">$/,'</span><span class="Identifier">\\</span> <span class="Constant">')<br/></li>
<li></span>&nbsp;&nbsp; cpy<span class="javaScriptParens">(</span><a href="../a.h.html#L79" title="a.h:79">out</a>.value=<span class="Constant">`ngn/<a href="../m.c.html#L59" title="m.c:59">k</a>, </span><span class="Special">${g.length}</span><span class="Constant"> bytes: [</span><span class="Special">\`${<a href="../t/t.c.html#L26" title="t/t.c:26">u</a>}\`</span><span class="Constant">](</span><span class="Special">${location.origin}</span><span class="Constant">/<a href="../m.c.html#L59" title="m.c:59">k</a>#</span><span class="Special">${p1(<a href="../j.c.html#L2" title="j.c:2">s</a>)}</span><span class="Constant">)`</span><span class="javaScriptParens">)</span><span class="Identifier">}<br/></li>
<li></span>&nbsp; bHelp.onclick=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span>ev<span class="javaScriptParens">(</span><span class="Constant">'`0:,/(,80#&quot;-&quot;),/:2_</span><span class="Special">\'</span><span class="Constant">(&amp;&quot;--&quot;~/:2#</span><span class="Special">\'</span><span class="Constant"><a href="../m.c.html#L70" title="m.c:70">x</a>)_x:0:&quot;<a href="../m.c.html#L58" title="m.c:58">repl</a>.<a href="../m.c.html#L59" title="m.c:59">k</a>&quot;</span><span class="Special">\<a href="../t/t.c.html#L33" title="t/t.c:33">n</a></span><span class="Constant">'</span><span class="javaScriptParens">)</span>.then<span class="javaScriptParens">(</span><a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;setTimeout<span class="javaScriptParens">(</span><a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><a href="../a.h.html#L79" title="a.h:79">out</a>.scrollTop=<span class="javaScriptValue">0</span><span class="Identifier">}</span>,<span class="javaScriptValue">1</span><span class="javaScriptParens">))</span><span class="Identifier">}<br/></li>
<li></span>&nbsp; selEx.onchange=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> v=selEx.selectedOptions<span class="Identifier">[</span><span class="javaScriptValue">0</span><span class="Identifier">]</span>.value<br/></li>
<li>&nbsp;&nbsp; <span class="Statement">if</span><span class="javaScriptParens">(</span>v<span class="javaScriptParens">)</span><span class="Identifier">{</span>fetch<span class="javaScriptParens">(</span>v<span class="javaScriptParens">)</span>.then<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<a href="../m.c.html#L70" title="m.c:70">x</a>.text<span class="javaScriptParens">())</span>.then<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span>ed.value=<a href="../m.c.html#L70" title="m.c:70">x</a>;evp<span class="javaScriptParens">()</span>;selEx.blur<span class="javaScriptParens">()</span><span class="Identifier">}</span><span class="javaScriptParens">)</span><span class="Identifier">}}<br/></li>
<li></span>&nbsp; ed.onkeydown=<a href="../m.c.html#L70" title="m.c:70">x</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../e.c.html#L2" title="e.c:2">b</a>=<span class="Identifier">{</span><span class="javaScriptValue">1013</span>:bEval,<span class="javaScriptValue">1071</span>:bGolf,<span class="javaScriptValue">1075</span>:bLink,<span class="javaScriptValue">112</span>:bHelp<span class="Identifier">}[</span>kc<span class="javaScriptParens">(</span><a href="../m.c.html#L70" title="m.c:70">x</a><span class="javaScriptParens">)</span><span class="Identifier">]</span>;<span class="Statement">if</span><span class="javaScriptParens">(</span><a href="../e.c.html#L2" title="e.c:2">b</a><span class="javaScriptParens">)</span><span class="Identifier">{</span><a href="../e.c.html#L2" title="e.c:2">b</a>.onclick<span class="javaScriptParens">()</span>;<span class="Statement">return</span>!<span class="javaScriptValue">1</span><span class="Identifier">}}<br/></li>
<li></span>&nbsp; ed.onkeyup=thr<span class="javaScriptParens">(</span>ubc,<span class="javaScriptValue">1000</span><span class="javaScriptParens">)</span><span class="Identifier">}}</span><span class="javaScriptParens">)<br/></li>
<li></span><br/></li>
<li><span class="Identifier">let</span> <a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>,g,iid,tid,aid,tickPeriod=<span class="javaScriptValue">50<br/></li>
<li></span><span class="Statement">const</span> pi=Math.PI,tau=<span class="javaScriptValue">2</span>*pi,<a href="../k.h.html#L2" title="k.h:2">K</a>=<a href="../j.c.html#L2" title="j.c:2">s</a>=&gt;app.<a href="../a.h.html#L84" title="a.h:84">evs</a><span class="javaScriptParens">(</span>ms<span class="javaScriptParens">(</span><a href="../j.c.html#L2" title="j.c:2">s</a>+<span class="Special">'\0'</span><span class="javaScriptParens">))</span>,<br/></li>
<li>tick=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'tick[]'</span><span class="javaScriptParens">)</span>,<br/></li>
<li><a href="x/tetris.k.html#L26" title="w/x/tetris.k:26">draw</a>=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'<a href="x/tetris.k.html#L26" title="w/x/tetris.k:26">draw</a>[]'</span><span class="javaScriptParens">)</span>;tid=setTimeout<span class="javaScriptParens">(</span>raf,<span class="javaScriptValue">40</span><span class="javaScriptParens">)</span><span class="Identifier">}</span>,<br/></li>
<li>raf=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;aid=requestAnimationFrame<span class="javaScriptParens">(</span><a href="x/tetris.k.html#L26" title="w/x/tetris.k:26">draw</a><span class="javaScriptParens">)</span>,<br/></li>
<li>hgr=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">if</span><span class="javaScriptParens">(</span>g<span class="javaScriptParens">)</span><span class="Statement">return</span>;doc.body.appendChild<span class="javaScriptParens">(</span><a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>=doc.createElement<span class="javaScriptParens">(</span><span class="Constant">'canvas'</span><span class="javaScriptParens">))</span>;g=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.getContext<span class="javaScriptParens">(</span><span class="Constant">'2d'</span><span class="javaScriptParens">)<br/></li>
<li></span> onresize<span class="javaScriptParens">()</span>;g.font=<span class="Constant">'0.05px monospace'</span>;iid=setInterval<span class="javaScriptParens">(</span>tick,tickPeriod<span class="javaScriptParens">)</span>;raf<span class="javaScriptParens">()<br/></li>
<li></span> onkeydown=onkeyup=<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>=&gt;g&amp;&amp;<a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'<a href="../m.c.html#L59" title="m.c:59">k</a>'</span>+<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.type<span class="Identifier">[</span><span class="javaScriptValue">3</span><span class="Identifier">]</span>+<span class="Constant">'@'</span>+<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.keyCode<span class="javaScriptParens">)<br/></li>
<li></span> onkeypress=<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>=&gt;<span class="Identifier">{</span><span class="Statement">if</span><span class="javaScriptParens">(</span>g<span class="javaScriptParens">)</span><span class="Identifier">{let</span> <a href="../t/t.c.html#L28" title="t/t.c:28">c</a>=<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.charCode;<a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'kx@'</span>+<a href="../t/t.c.html#L28" title="t/t.c:28">c</a><span class="javaScriptParens">)</span>;<span class="javaScriptParens">(</span><a href="../t/t.c.html#L28" title="t/t.c:28">c</a>===<span class="javaScriptValue">10</span>||<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>===<span class="javaScriptValue">13</span><span class="javaScriptParens">)</span>&amp;&amp;<a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'kr@10'</span><span class="javaScriptParens">)</span>;<a href="../t/t.c.html#L28" title="t/t.c:28">c</a>===<span class="javaScriptValue">8</span>&amp;&amp;<a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'kb@8'</span><span class="javaScriptParens">)</span><span class="Identifier">}}<br/></li>
<li></span> <a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.onmousedown=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.onmouseup=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.onmousemove=<br/></li>
<li>&nbsp; <a href="../t/t.c.html#L33" title="t/t.c:33">e</a>=&gt;<span class="Identifier">{</span><span class="Statement">const</span> <a href="../0.c.html#L19" title="0.c:19">r</a>=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.getBoundingClientRect<span class="javaScriptParens">()</span>;<a href="../k.h.html#L2" title="k.h:2">K</a><span class="javaScriptParens">(</span><span class="Constant">'<a href="../t/t.c.html#L30" title="t/t.c:30">m</a>'</span>+<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.type<span class="Identifier">[</span><span class="javaScriptValue">5</span><span class="Identifier">]</span>+<span class="Constant">'@'</span>+<span class="Identifier">[</span><a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.clientX-<a href="../0.c.html#L19" title="0.c:19">r</a>.<a href="../m.c.html#L70" title="m.c:70">x</a>,<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.clientY-<a href="../0.c.html#L19" title="0.c:19">r</a>.y<span class="Identifier">]</span><span class="javaScriptParens">)</span><span class="Identifier">}}</span>,<br/></li>
<li>txt=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">if</span><span class="javaScriptParens">(</span>!g<span class="javaScriptParens">)</span><span class="Statement">return</span>;<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.parentNode.removeChild<span class="javaScriptParens">(</span><a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a><span class="javaScriptParens">)</span>;clearInterval<span class="javaScriptParens">(</span>iid<span class="javaScriptParens">)</span>;clearTimeout<span class="javaScriptParens">(</span>tid<span class="javaScriptParens">)</span>;cancelAnimationFrame<span class="javaScriptParens">(</span>aid<span class="javaScriptParens">)<br/></li>
<li></span> <a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>=g=iid=tid=aid=<span class="Statement">null</span><span class="Identifier">}<br/></li>
<li></span><br/></li>
<li>onresize=<a href="../a.h.html#L5" title="a.h:5">_</a>=&gt;<span class="Identifier">{</span><span class="Statement">if</span><span class="javaScriptParens">(</span>!<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>||!<a href="../a.h.html#L79" title="a.h:79">out</a><span class="javaScriptParens">)</span><span class="Statement">return</span>;<span class="Identifier">let</span> <a href="../j.c.html#L2" title="j.c:2">s</a>=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.style,<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>=<a href="../a.h.html#L79" title="a.h:79">out</a>;<a href="../j.c.html#L2" title="j.c:2">s</a>.left=<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.offsetLeft+<span class="Constant">'px'</span>;<a href="../j.c.html#L2" title="j.c:2">s</a>.<span class="Statement">top</span>=<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.offsetTop+<span class="Constant">'px'<br/></li>
<li></span> <span class="Statement">const</span> <a href="../m.c.html#L59" title="m.c:59">k</a>=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.width=<a href="../l/fmt.k.html#L27" title="l/fmt.k:27">cnv</a>.height=<a href="../a.h.html#L53" title="a.h:53">min</a><span class="javaScriptParens">(</span><a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.offsetWidth,<a href="../t/t.c.html#L33" title="t/t.c:33">e</a>.offsetHeight<span class="javaScriptParens">)</span>;g.scale<span class="javaScriptParens">(</span><a href="../m.c.html#L59" title="m.c:59">k</a>,<a href="../m.c.html#L59" title="m.c:59">k</a><span class="javaScriptParens">)</span><span class="Identifier">}<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

 </body>
</html>
